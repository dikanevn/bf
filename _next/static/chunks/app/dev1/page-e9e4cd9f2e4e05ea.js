(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{1587:(e,t,r)=>{var a={"./10/d02.json":[86700,6700],"./11/d02.json":[21827,1827],"./12/d02.json":[90758,758],"./13/d02.json":[38229,8229],"./14/d02.json":[32448,2448],"./15/d02.json":[15719,5719],"./16/d02.json":[28490,8490],"./17/d02.json":[71193,1193],"./18/d02.json":[43220,3220],"./19/d02.json":[76075,6075],"./20/d02.json":[41787,1787],"./21/d02.json":[67620,7620],"./7/d02.json":[58746,8746],"./8/d02.json":[83963,3963],"./9/d02.json":[9796,9796]};function s(e){if(!r.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],s=t[0];return r.e(t[1]).then(()=>r.t(s,19))}s.keys=()=>Object.keys(a),s.id=1587,e.exports=s},4541:(e,t,r)=>{var a={"./1/d2.json":[10218,218],"./10/d2.json":[75290,5290],"./11/d2.json":[9267,9267],"./12/d2.json":[36600,6600],"./13/d2.json":[10881,881],"./14/d2.json":[13462,3462],"./15/d2.json":[495,495],"./16/d2.json":[57732,7732],"./17/d2.json":[78797,8797],"./18/d2.json":[12434,2434],"./19/d2.json":[11019,1019],"./2/d2.json":[38993,8993],"./20/d2.json":[51739,1739],"./21/d2.json":[33570,3570],"./3/d2.json":[91688,1688],"./4/d2.json":[62879,2879],"./5/d2.json":[37190,7190],"./6/d2.json":[7645,7645],"./7/d2.json":[46676,6676],"./8/d2.json":[76411,6411],"./9/d2.json":[58242,8242]};function s(e){if(!r.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],s=t[0];return r.e(t[1]).then(()=>r.t(s,19))}s.keys=()=>Object.keys(a),s.id=4541,e.exports=s},99446:(e,t,r)=>{var a={"./1/d3.json":[30057,57],"./10/d3.json":[48985,8985],"./11/d3.json":[11372,1372],"./12/d3.json":[24271,4271],"./13/d3.json":[3810,3810],"./14/d3.json":[76501,6501],"./15/d3.json":[12824,2824],"./16/d3.json":[67819,7819],"./17/d3.json":[54702,4702],"./18/d3.json":[98513,8513],"./19/d3.json":[932,932],"./2/d3.json":[52914,2914],"./20/d3.json":[41492,1492],"./21/d3.json":[13057,3057],"./3/d3.json":[42463,2463],"./4/d3.json":[12104,2104],"./5/d3.json":[2149,2149],"./6/d3.json":[47390,7390],"./7/d3.json":[44443,4443],"./8/d3.json":[66164,6164],"./9/d3.json":[37729,7729]};function s(e){if(!r.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],s=t[0];return r.e(t[1]).then(()=>r.t(s,19))}s.keys=()=>Object.keys(a),s.id=99446,e.exports=s},47790:()=>{},50477:()=>{},91903:()=>{},24394:()=>{},43685:(e,t,r)=>{Promise.resolve().then(r.bind(r,88011))},88011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(95155),s=r(48173),n=r.n(s),i=r(77711),o=r(11929),l=r(47928),c=r(77369),d=r(2200),b=r(92101),u=r(75927),y=r(12115),g=r(7316),h=r(44239);let f=new c.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),m=new c.PublicKey("YARH5uorBN1qRHXZNHMXnDsqg6hKrEQptPbg1eiQPeP"),p=(0,i.default)(()=>Promise.all([r.e(8389),r.e(8731)]).then(r.bind(r,48731)).then(e=>e.WalletMultiButton),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),j=(0,i.default)(()=>Promise.all([r.e(9252),r.e(8571),r.e(8389),r.e(9785),r.e(826)]).then(r.bind(r,60826)),{loadableGenerated:{webpack:()=>[60826]},ssr:!1});function k(e){let t=(0,g.sha256)(e);return u.Buffer.from(t,"hex")}function S(){let{publicKey:e,signTransaction:t,sendTransaction:s}=(0,o.v)(),{connection:i}=(0,l.w)(),[g,j]=(0,y.useState)(!1),[S,w]=(0,y.useState)(null),[x,v]=(0,y.useState)(null),[P,W]=(0,y.useState)(!1),[N,T]=(0,y.useState)(null),[B,E]=(0,y.useState)([]),[K,_]=(0,y.useState)(0),[A,R]=(0,y.useState)(0),[O,I]=(0,y.useState)(0),M=async()=>{if(!e||!t||!S){alert("Пожалуйста, подключите кошелек и создайте токен сначала!");return}try{j(!0);let[r]=c.PublicKey.findProgramAddressSync([u.Buffer.from("metadata"),f.toBytes(),S.publicKey.toBytes()],f);v(r);let a=new c.Transaction;a.add(new c.TransactionInstruction({programId:m,keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:u.Buffer.from([4])})),a.feePayer=e,a.recentBlockhash=(await i.getLatestBlockhash()).blockhash;let s=await t(a),n=await i.sendRawTransaction(s.serialize());await i.confirmTransaction(n),alert("Метадата создана!\nMetadata: ".concat(r.toString()))}catch(e){console.error("Ошибка при создании метадаты:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{j(!1)}},C=async()=>{if(!e||!t||!S){alert("Пожалуйста, подключите кошелек и создайте токен сначала!");return}try{j(!0);let[r]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],m),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:m,keys:[{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1}],data:u.Buffer.from([5])})),a.feePayer=e,a.recentBlockhash=(await i.getLatestBlockhash()).blockhash;let s=await t(a),n=await i.sendRawTransaction(s.serialize());await i.confirmTransaction(n),alert("Mint authority успешно изменен на программу!\nProgram Authority: ".concat(r.toString()))}catch(e){console.error("Ошибка при смене mint authority:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{j(!1)}},U=async()=>{try{if(!e||!s)return;W(!0);let t=c.Keypair.generate(),r=new c.TransactionInstruction({programId:m,keys:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:u.Buffer.from([6])}),a=new c.Transaction().add(r),n=await s(a,i,{signers:[t]});await i.confirmTransaction(n),w(t),alert("Минт аккаунт успешно создан от имени программы!")}catch(e){console.error(e),alert("Ошибка при создании минт аккаунта от программы")}finally{W(!1)}},D=async()=>{if(!e||!t||!S){alert("Пожалуйста, подключите кошелек и создайте минт сначала!");return}try{j(!0);let r=await (0,b.Ob)(S.publicKey,e,!1),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:m,keys:[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:S.publicKey,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:d.EK,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:u.Buffer.from([7])})),a.feePayer=e,a.recentBlockhash=(await i.getLatestBlockhash()).blockhash;let s=await t(a),n=await i.sendRawTransaction(s.serialize());await i.confirmTransaction(n),T(r),alert("Ассоциированный токен аккаунт создан!\nATA: ".concat(r.toString()))}catch(e){console.error("Ошибка при создании ассоциированного токен аккаунта:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{j(!1)}},Y=async()=>{if(!e||!t||!S||!N){alert("Пожалуйста, подключите кошелек, создайте минт и АТА сначала!");return}try{j(!0);let[r]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],m),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:m,keys:[{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1}],data:u.Buffer.from([8])})),a.feePayer=e,a.recentBlockhash=(await i.getLatestBlockhash()).blockhash;let s=await t(a),n=await i.sendRawTransaction(s.serialize());await i.confirmTransaction(n),alert("Токен успешно заминчен!")}catch(e){console.error("Ошибка при минтинге токена:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{j(!1)}},L=async()=>{try{if(!e||!s){alert("Пожалуйста, подключите кошелек!");return}W(!0);let t=c.Keypair.generate(),r=await (0,b.Ob)(t.publicKey,e,!1),[a]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],m),n=new c.TransactionInstruction({programId:m,keys:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:d.EK,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}],data:u.Buffer.from([9])}),o=new c.Transaction,{blockhash:l,lastValidBlockHeight:y}=await i.getLatestBlockhash("confirmed");o.add(n),o.feePayer=e,o.recentBlockhash=l;try{let e=await s(o,i,{signers:[t]});await i.confirmTransaction({signature:e,blockhash:l,lastValidBlockHeight:y}),w(t),T(r),alert("Минт создан, ATA создан и токен заминчен успешно!")}catch(e){console.error("Ошибка при отправке транзакции:",e),alert("Ошибка при отправке транзакции: ".concat(e instanceof Error?e.message:String(e)))}}catch(e){console.error("Общая ошибка:",e),alert("Общая ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{W(!1)}},z=async e=>{try{let a=[],s=1,n=0;for(;;)try{await r(4541)("./".concat(s,"/d2.json")),n=s,s++}catch(e){break}_(n);for(let s=1;s<=n;s++)try{let n=await r(4541)("./".concat(s,"/d2.json")),i=await r(99446)("./".concat(s,"/d3.json")),o=await r(1587)("./".concat(s,"/d02.json")),l=n.default.some(t=>t.player===e),c=i.default.some(t=>t.player===e);if(l||c){var t;let e=null===(t=o.default.find(e=>e.round===s))||void 0===t?void 0:t.RewardsOrDeploy;a.push({round:s,participated:l,won:c,date:e?new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"long"}):"Round ".concat(s)})}}catch(e){continue}let i=a.filter(e=>e.won).length,o=a.filter(e=>e.participated&&!e.won).length;R(i),I(o),E(a.filter(e=>e.won).sort((e,t)=>t.round-e.round))}catch(e){console.error("Ошибка при загрузке выигрышных раундов:",e)}},q=async()=>{try{j(!0);let e=1,t=0;for(;;)try{await r(99446)("./".concat(e,"/d3.json")),t=e,e++}catch(e){break}if(0===t){alert("Раунды не найдены");return}let a=(await r(99446)("./".concat(t,"/d3.json"))).default.map(e=>e.player).map(e=>{let t=u.Buffer.from(new c.PublicKey(e).toBytes());return k(t)}).slice().sort(u.Buffer.compare),s=new h.MerkleTree(a,k,{sortPairs:!0}).getRoot();alert("Merkle Root последнего раунда (".concat(t,"):\n").concat(s.toString("hex"))),console.log("Merkle Root в байтах:",Array.from(s))}catch(e){console.error("Ошибка при вычислении Merkle Root:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{j(!1)}};return(0,y.useEffect)(()=>{e&&z(e.toString())},[e]),(0,a.jsx)("div",{className:"min-h-screen bg-black overflow-auto",children:(0,a.jsxs)("div",{className:"pt-[2vh] px-[2vw] text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)(n(),{href:"/",className:"text-blue-400 hover:text-blue-300",children:"← Главная"}),(0,a.jsx)(p,{})]}),e&&(0,a.jsxs)("div",{className:"mt-8 break-all",children:[(0,a.jsxs)("div",{children:["Подключенный адрес: ",e.toString()]}),S&&(0,a.jsxs)("div",{className:"mt-2",children:["Mint Address: ",S.publicKey.toString()]}),N&&(0,a.jsxs)("div",{className:"mt-2",children:["Associated Token Account: ",N.toString()]}),x&&(0,a.jsxs)("div",{className:"mt-2",children:["Metadata Address: ",x.toString()]}),(0,a.jsxs)("div",{className:"mt-4 text-gray-400",children:[(0,a.jsxs)("div",{children:["Всего игр: ",K]}),(0,a.jsxs)("div",{children:["Выиграно: ",A]}),(0,a.jsxs)("div",{children:["Проиграно: ",O]})]}),B.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-gray-400 mb-2",children:"Выигрышные раунды:"}),B.map(e=>(0,a.jsxs)("div",{className:"text-green-400",children:["Раунд ",e.round," | ",e.date," | Выигрыш подтвержден! ✅"]},e.round))]})]}),e&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:M,disabled:g||!S,className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"1. Создать метадату"}),(0,a.jsx)("button",{onClick:C,disabled:g||!S,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"2. Установить программу как mint authority"}),(0,a.jsx)("button",{onClick:U,disabled:!e||P,className:"bg-teal-600 hover:bg-teal-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:P?"Processing...":"3. Создать минт от имени программы"}),(0,a.jsx)("button",{onClick:D,disabled:g||!S,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"4. Создать ассоциированный токен аккаунт"}),(0,a.jsx)("button",{onClick:Y,disabled:g||!S||!N,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"5. Минтить токен"}),(0,a.jsx)("button",{onClick:L,disabled:!e||P,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:P?"Processing...":"3-5. Создать минт, ATA и минтить токен (Всё сразу)"}),(0,a.jsx)("button",{onClick:q,disabled:g,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Вычисление...":"7. Посчитать Merkle Root последнего раунда"})]})]})})}function w(){return(0,a.jsx)(j,{children:(0,a.jsx)(S,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8956,4845,8173,2192,8441,1517,7358],()=>t(43685)),_N_E=e.O()}]);