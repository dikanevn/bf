(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{1587:(e,r,t)=>{var a={"./10/d02.json":[86700,6700],"./11/d02.json":[21827,1827],"./12/d02.json":[90758,758],"./13/d02.json":[38229,8229],"./14/d02.json":[32448,2448],"./15/d02.json":[15719,5719],"./16/d02.json":[28490,8490],"./17/d02.json":[71193,1193],"./18/d02.json":[43220,3220],"./19/d02.json":[76075,6075],"./20/d02.json":[41787,1787],"./21/d02.json":[67620,7620],"./7/d02.json":[58746,8746],"./8/d02.json":[83963,3963],"./9/d02.json":[9796,9796]};function n(e){if(!t.o(a,e))return Promise.resolve().then(()=>{var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r});var r=a[e],n=r[0];return t.e(r[1]).then(()=>t.t(n,19))}n.keys=()=>Object.keys(a),n.id=1587,e.exports=n},4541:(e,r,t)=>{var a={"./1/d2.json":[10218,218],"./10/d2.json":[75290,5290],"./11/d2.json":[9267,9267],"./12/d2.json":[36600,6600],"./13/d2.json":[10881,881],"./14/d2.json":[13462,3462],"./15/d2.json":[495,495],"./16/d2.json":[57732,7732],"./17/d2.json":[78797,8797],"./18/d2.json":[12434,2434],"./19/d2.json":[11019,1019],"./2/d2.json":[38993,8993],"./20/d2.json":[51739,1739],"./21/d2.json":[33570,3570],"./3/d2.json":[91688,1688],"./4/d2.json":[62879,2879],"./5/d2.json":[37190,7190],"./6/d2.json":[7645,7645],"./7/d2.json":[46676,6676],"./8/d2.json":[76411,6411],"./9/d2.json":[58242,8242]};function n(e){if(!t.o(a,e))return Promise.resolve().then(()=>{var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r});var r=a[e],n=r[0];return t.e(r[1]).then(()=>t.t(n,19))}n.keys=()=>Object.keys(a),n.id=4541,e.exports=n},99446:(e,r,t)=>{var a={"./1/d3.json":[30057,57],"./10/d3.json":[48985,8985],"./11/d3.json":[11372,1372],"./12/d3.json":[24271,4271],"./13/d3.json":[3810,3810],"./14/d3.json":[76501,6501],"./15/d3.json":[12824,2824],"./16/d3.json":[67819,7819],"./17/d3.json":[54702,4702],"./18/d3.json":[98513,8513],"./19/d3.json":[932,932],"./2/d3.json":[52914,2914],"./20/d3.json":[41492,1492],"./21/d3.json":[13057,3057],"./3/d3.json":[42463,2463],"./4/d3.json":[12104,2104],"./5/d3.json":[2149,2149],"./6/d3.json":[47390,7390],"./7/d3.json":[44443,4443],"./8/d3.json":[66164,6164],"./9/d3.json":[37729,7729]};function n(e){if(!t.o(a,e))return Promise.resolve().then(()=>{var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r});var r=a[e],n=r[0];return t.e(r[1]).then(()=>t.t(n,19))}n.keys=()=>Object.keys(a),n.id=99446,e.exports=n},47790:()=>{},50477:()=>{},91903:()=>{},24394:()=>{},43685:(e,r,t)=>{Promise.resolve().then(t.bind(t,88011))},88011:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var a=t(95155),n=t(48173),i=t.n(n),s=t(77711),o=t(11929),l=t(47928),c=t(77369),d=t(2200),b=t(92101),u=t(75927),y=t(12115),g=t(7316),f=t(44239);let m=new c.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),p=new c.PublicKey("YARH5uorBN1qRHXZNHMXnDsqg6hKrEQptPbg1eiQPeP"),h=(0,s.default)(()=>Promise.all([t.e(8389),t.e(8731)]).then(t.bind(t,48731)).then(e=>e.WalletMultiButton),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),k=(0,s.default)(()=>Promise.all([t.e(9252),t.e(8571),t.e(8389),t.e(9785),t.e(826)]).then(t.bind(t,60826)),{loadableGenerated:{webpack:()=>[60826]},ssr:!1});function j(e){let r=(0,g.sha256)(e);return u.Buffer.from(r,"hex")}function S(){let{publicKey:e,signTransaction:r,sendTransaction:n}=(0,o.v)(),{connection:s}=(0,l.w)(),[g,k]=(0,y.useState)(!1),[S,w]=(0,y.useState)(null),[x,P]=(0,y.useState)(null),[v,B]=(0,y.useState)(!1),[W,T]=(0,y.useState)(null),[E,N]=(0,y.useState)([]),[K,R]=(0,y.useState)(0),[A,_]=(0,y.useState)(0),[M,I]=(0,y.useState)(0),O=async()=>{if(!e||!r||!S){alert("Пожалуйста, подключите кошелек и создайте токен сначала!");return}try{k(!0);let[t]=c.PublicKey.findProgramAddressSync([u.Buffer.from("metadata"),m.toBytes(),S.publicKey.toBytes()],m);P(t);let a=new c.Transaction;a.add(new c.TransactionInstruction({programId:p,keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:u.Buffer.from([4])})),a.feePayer=e,a.recentBlockhash=(await s.getLatestBlockhash()).blockhash;let n=await r(a),i=await s.sendRawTransaction(n.serialize());await s.confirmTransaction(i),alert("Метадата создана!\nMetadata: ".concat(t.toString()))}catch(e){console.error("Ошибка при создании метадаты:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}},C=async()=>{if(!e||!r||!S){alert("Пожалуйста, подключите кошелек и создайте токен сначала!");return}try{k(!0);let[t]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],p),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:p,keys:[{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1}],data:u.Buffer.from([5])})),a.feePayer=e,a.recentBlockhash=(await s.getLatestBlockhash()).blockhash;let n=await r(a),i=await s.sendRawTransaction(n.serialize());await s.confirmTransaction(i),alert("Mint authority успешно изменен на программу!\nProgram Authority: ".concat(t.toString()))}catch(e){console.error("Ошибка при смене mint authority:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}},U=async()=>{try{if(!e||!n)return;B(!0);let r=c.Keypair.generate(),t=new c.TransactionInstruction({programId:p,keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:u.Buffer.from([6])}),a=new c.Transaction().add(t),i=await n(a,s,{signers:[r]});await s.confirmTransaction(i),w(r),alert("Минт аккаунт успешно создан от имени программы!")}catch(e){console.error(e),alert("Ошибка при создании минт аккаунта от программы")}finally{B(!1)}},Y=async()=>{if(!e||!r||!S){alert("Пожалуйста, подключите кошелек и создайте минт сначала!");return}try{k(!0);let t=await (0,b.Ob)(S.publicKey,e,!1),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:p,keys:[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:S.publicKey,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:d.EK,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:u.Buffer.from([7])})),a.feePayer=e,a.recentBlockhash=(await s.getLatestBlockhash()).blockhash;let n=await r(a),i=await s.sendRawTransaction(n.serialize());await s.confirmTransaction(i),T(t),alert("Ассоциированный токен аккаунт создан!\nATA: ".concat(t.toString()))}catch(e){console.error("Ошибка при создании ассоциированного токен аккаунта:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}},D=async()=>{if(!e||!r||!S||!W){alert("Пожалуйста, подключите кошелек, создайте минт и АТА сначала!");return}try{k(!0);let[t]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],p),a=new c.Transaction;a.add(new c.TransactionInstruction({programId:p,keys:[{pubkey:S.publicKey,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1}],data:u.Buffer.from([8])})),a.feePayer=e,a.recentBlockhash=(await s.getLatestBlockhash()).blockhash;let n=await r(a),i=await s.sendRawTransaction(n.serialize());await s.confirmTransaction(i),alert("Токен успешно заминчен!")}catch(e){console.error("Ошибка при минтинге токена:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}},L=async()=>{try{if(!e||!n){alert("Пожалуйста, подключите кошелек!");return}B(!0);let r=c.Keypair.generate(),t=await (0,b.Ob)(r.publicKey,e,!1),[a]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],p),i=new c.TransactionInstruction({programId:p,keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:d.EK,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}],data:u.Buffer.from([9])}),o=new c.Transaction,{blockhash:l,lastValidBlockHeight:y}=await s.getLatestBlockhash("confirmed");o.add(i),o.feePayer=e,o.recentBlockhash=l;try{let e=await n(o,s,{signers:[r]});console.log("Transaction sent:",e),await s.confirmTransaction({blockhash:l,lastValidBlockHeight:y,signature:e}),console.log("Transaction confirmed"),w(r),T(t),alert("Минт, ATA и токен успешно созданы!")}catch(e){console.error("Error sending transaction:",e),alert("Ошибка при отправке транзакции: ".concat(e instanceof Error?e.message:String(e)))}}catch(e){console.error("Error:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{B(!1)}},z=async()=>{try{if(!e||!n){alert("Пожалуйста, подключите кошелек!");return}B(!0);let r=1,a=0;for(;;)try{await t(99446)("./".concat(r,"/d3.json")),a=r,r++}catch(e){break}if(0===a){alert("Раунды не найдены"),B(!1);return}let i=(await t(99446)("./".concat(a,"/d3.json"))).default.map(e=>e.player).map(e=>{let r=u.Buffer.from(new c.PublicKey(e).toBytes());return j(r)}).slice().sort(u.Buffer.compare),o=new f.MerkleTree(i,j,{sortPairs:!0}),l=j(u.Buffer.from(e.toBytes())),y=o.getProof(l);if(!y||0===y.length){alert("Ваш адрес не найден в списке участников раунда ".concat(a,"!")),B(!1);return}let g=y.map(e=>e.data),m=c.Keypair.generate(),h=await (0,b.Ob)(m.publicKey,e,!1),[k]=c.PublicKey.findProgramAddressSync([u.Buffer.from("mint_authority")],p),S=1+32*g.length,w=u.Buffer.alloc(S);w[0]=10;for(let e=0;e<g.length;e++)g[e].copy(w,1+32*e);let x=new c.TransactionInstruction({programId:p,keys:[{pubkey:m.publicKey,isSigner:!0,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.x5,isSigner:!1,isWritable:!1},{pubkey:d.EK,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!1}],data:w}),P=new c.Transaction,{blockhash:v,lastValidBlockHeight:W}=await s.getLatestBlockhash("confirmed");P.add(x),P.feePayer=e,P.recentBlockhash=v;try{let e=await n(P,s,{signers:[m]});console.log("Transaction sent:",e),await s.confirmTransaction({blockhash:v,lastValidBlockHeight:W,signature:e}),console.log("Transaction confirmed"),alert("Минт, ATA и токен успешно созданы с проверкой Merkle proof для раунда ".concat(a,"!"))}catch(e){console.error("Error sending transaction:",e),alert("Ошибка при отправке транзакции: ".concat(e instanceof Error?e.message:String(e)))}}catch(e){console.error("Error:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{B(!1)}},V=async e=>{try{let a=[],n=1,i=0;for(;;)try{await t(4541)("./".concat(n,"/d2.json")),i=n,n++}catch(e){break}R(i);for(let n=1;n<=i;n++)try{let i=await t(4541)("./".concat(n,"/d2.json")),s=await t(99446)("./".concat(n,"/d3.json")),o=await t(1587)("./".concat(n,"/d02.json")),l=i.default.some(r=>r.player===e),c=s.default.some(r=>r.player===e);if(l||c){var r;let e=null===(r=o.default.find(e=>e.round===n))||void 0===r?void 0:r.RewardsOrDeploy;a.push({round:n,participated:l,won:c,date:e?new Date(e).toLocaleDateString("en-US",{day:"numeric",month:"long"}):"Round ".concat(n)})}}catch(e){continue}let s=a.filter(e=>e.won).length,o=a.filter(e=>e.participated&&!e.won).length;_(s),I(o),N(a.filter(e=>e.won).sort((e,r)=>r.round-e.round))}catch(e){console.error("Ошибка при загрузке выигрышных раундов:",e)}},q=async()=>{try{k(!0);let e=1,r=0;for(;;)try{await t(99446)("./".concat(e,"/d3.json")),r=e,e++}catch(e){break}if(0===r){alert("Раунды не найдены");return}let a=(await t(99446)("./".concat(r,"/d3.json"))).default.map(e=>e.player).map(e=>{let r=u.Buffer.from(new c.PublicKey(e).toBytes());return j(r)}).slice().sort(u.Buffer.compare),n=new f.MerkleTree(a,j,{sortPairs:!0}).getRoot(),i=Array.from(n).map(e=>"0x".concat(e.toString(16).padStart(2,"0"))),s="[\n    ".concat(i.join(", "),"\n]");console.log("Merkle Root в байтах:",s),alert("Merkle Root последнего раунда (".concat(r,"):\n").concat(s))}catch(e){console.error("Ошибка при вычислении Merkle Root:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}},F=async()=>{try{k(!0);let e=1,r=0;for(;;)try{await t(99446)("./".concat(e,"/d3.json")),r=e,e++}catch(e){break}if(0===r){alert("Раунды не найдены");return}let a=[];for(let e=1;e<=r;e++)try{let r=(await t(99446)("./".concat(e,"/d3.json"))).default.map(e=>e.player).map(e=>{let r=u.Buffer.from(new c.PublicKey(e).toBytes());return j(r)}).slice().sort(u.Buffer.compare),n=new f.MerkleTree(r,j,{sortPairs:!0}).getRoot(),i=Array.from(n).map(e=>"0x".concat(e.toString(16).padStart(2,"0"))),s="[\n    ".concat(i.join(", "),"\n]");a.push("Раунд ".concat(e,":\n").concat(s))}catch(r){console.error("Ошибка при обработке раунда ".concat(e,":"),r),a.push("Раунд ".concat(e,": Ошибка обработки"))}let n="Merkle Roots для всех раундов:\n\n".concat(a.join("\n\n"));console.log(n),alert(n)}catch(e){console.error("Ошибка при вычислении Merkle Roots:",e),alert("Ошибка: ".concat(e instanceof Error?e.message:String(e)))}finally{k(!1)}};return(0,y.useEffect)(()=>{e&&V(e.toString())},[e]),(0,a.jsx)("div",{className:"min-h-screen bg-black",children:(0,a.jsxs)("div",{className:"pt-[2vh] px-[2vw] text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)(i(),{href:"/",className:"text-blue-400 hover:text-blue-300",children:"← Главная"}),(0,a.jsx)(h,{})]}),e&&(0,a.jsxs)("div",{className:"mt-8 break-all",children:[(0,a.jsxs)("div",{children:["Подключенный адрес: ",e.toString()]}),S&&(0,a.jsxs)("div",{className:"mt-2",children:["Mint Address: ",S.publicKey.toString()]}),W&&(0,a.jsxs)("div",{className:"mt-2",children:["Associated Token Account: ",W.toString()]}),x&&(0,a.jsxs)("div",{className:"mt-2",children:["Metadata Address: ",x.toString()]}),(0,a.jsxs)("div",{className:"mt-4 text-gray-400",children:[(0,a.jsxs)("div",{children:["Всего игр: ",K]}),(0,a.jsxs)("div",{children:["Выиграно: ",A]}),(0,a.jsxs)("div",{children:["Проиграно: ",M]})]}),E.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-gray-400 mb-2",children:"Выигрышные раунды:"}),E.map(e=>(0,a.jsxs)("div",{className:"text-green-400",children:["Раунд ",e.round," | ",e.date," | Выигрыш подтвержден! ✅"]},e.round))]})]}),e&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:O,disabled:g||!S,className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"1. Создать метадату"}),(0,a.jsx)("button",{onClick:C,disabled:g||!S,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"2. Установить программу как mint authority"}),(0,a.jsx)("button",{onClick:U,disabled:!e||v,className:"bg-teal-600 hover:bg-teal-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:v?"Processing...":"3. Создать минт от имени программы"}),(0,a.jsx)("button",{onClick:Y,disabled:g||!S,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"4. Создать ассоциированный токен аккаунт"}),(0,a.jsx)("button",{onClick:D,disabled:g||!S||!W,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Processing...":"5. Минтить токен"}),(0,a.jsx)("button",{onClick:L,disabled:!e||v,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:v?"Processing...":"6. Создать минт, ATA и минтить токен (Всё сразу)"}),(0,a.jsx)("button",{onClick:q,disabled:g,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Вычисление...":"7. Посчитать Merkle Root последнего раунда"}),(0,a.jsx)("button",{onClick:F,disabled:g,className:"bg-yellow-800 hover:bg-yellow-900 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:g?"Вычисление...":"8. Посчитать Merkle Root всех раундов"}),(0,a.jsx)("button",{onClick:z,disabled:!e||v,className:"bg-pink-600 hover:bg-pink-700 text-white px-3 py-1.5 text-sm disabled:opacity-50",children:v?"Processing...":"10. Создать минт и токен с проверкой Merkle proof"})]})]})})}function w(){return(0,a.jsx)(k,{children:(0,a.jsx)(S,{})})}u.Buffer.from([144,96,248,203,248,206,168,164,140,180,105,124,98,232,170,79,16,76,154,34,105,180,111,198,155,73,116,146,60,255,27,19])}},e=>{var r=r=>e(e.s=r);e.O(0,[8956,4845,8173,2192,8441,1517,7358],()=>r(43685)),_N_E=e.O()}]);